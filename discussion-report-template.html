<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>博客评论区周报</title>
  <style>
    /* --- 客户端重置 --- */
    body { margin: 0; padding: 0; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; background-color: #f6f8fa; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Microsoft YaHei', 'SimHei', Helvetica, Arial, sans-serif; }
    table, td { border-collapse: collapse; mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
    img { border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic; }
    
    /* --- 移动端适配 --- */
    @media only screen and (max-width: 600px) {
      .main-card { width: 100% !important; border-radius: 0 !important; margin-top: 0 !important; box-shadow: none !important; }
      .content-padding { padding: 20px 16px !important; } /* 增加左右边距舒适度 */
      .avatar-col { width: 44px !important; } /* 稍微缩小头像列宽适配手机 */
      .avatar-img { width: 32px !important; height: 32px !important; }
      .stats-col { display: block !important; width: 100% !important; margin-bottom: 10px !important; border-right: none !important; border-bottom: 1px solid #e1e4e8; }
      .stats-col:last-child { border-bottom: none; }
      .mobile-block { display: block !important; margin-top: 4px; } /* 强制换行优化 */
    }
  </style>
</head>
<body style="margin: 0; padding: 0; background-color: #f6f8fa; color: #24292e;">

  <!-- 外部容器 -->
  <div style="background-color: #f6f8fa; width: 100%; padding-bottom: 40px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;">
    
    <center>
      <!-- 主卡片 -->
      <table class="main-card" role="presentation" border="0" cellpadding="0" cellspacing="0" width="600" style="background-color: #ffffff; margin-top: 30px; border-radius: 8px; overflow: hidden; box-shadow: 0 1px 3px rgba(0,0,0,0.12); max-width: 600px; width: 100%; border: 1px solid #e1e4e8;">
        
        <!-- 顶部 Header -->
        <tr>
          <td style="background-color: #24292e; padding: 32px 24px; text-align: center;">
            <h1 style="color: #ffffff; font-size: 18px; font-weight: 600; margin: 0; letter-spacing: 0.5px; line-height: 1.4;">
              博客评论区周报
            </h1>
            <p style="margin: 6px 0 0 0; color: #959da5; font-size: 12px;">
              本周动态汇总
            </p>
          </td>
        </tr>
        <!-- 装饰性线条 -->
        <tr>
          <td style="height: 3px; width: 100%; background-color: #0366d6; font-size: 0; line-height: 0;">&nbsp;</td>
        </tr>

        <!-- 日期范围 -->
        <tr>
          <td class="content-padding" style="padding: 20px 32px 10px 32px; text-align: center;">
            <div style="background-color: #f1f8ff; border: 1px solid #c8e1ff; color: #0366d6; font-size: 12px; font-weight: 600; padding: 6px 12px; border-radius: 100px; display: inline-block;">
              {{DATE_START}} ~ {{DATE_END}}
            </div>
          </td>
        </tr>

        <!-- ================= 数据概览 Dashboard ================= -->
        <tr>
          <td class="content-padding" style="padding: 16px 32px 10px 32px;">
            <table width="100%" border="0" cellspacing="0" cellpadding="0" style="background-color: #fafbfc; border: 1px solid #e1e4e8; border-radius: 8px;">
              <tr>
                <!-- 统计项 1 -->
                <td class="stats-col" width="33%" style="padding: 12px 0; text-align: center; border-right: 1px solid #e1e4e8;">
                  <div style="font-size: 20px; font-weight: 600; color: #24292e; line-height: 1.2;">{{STAT_NEW_DISCUSSIONS}}</div>
                  <div style="font-size: 11px; color: #586069; margin-top: 4px;">新增讨论</div>
                </td>
                <!-- 统计项 2 -->
                <td class="stats-col" width="33%" style="padding: 12px 0; text-align: center; border-right: 1px solid #e1e4e8;">
                  <div style="font-size: 20px; font-weight: 600; color: #0366d6; line-height: 1.2;">{{STAT_TOTAL_COMMENTS}}</div>
                  <div style="font-size: 11px; color: #586069; margin-top: 4px;">新评论/回复</div>
                </td>
                <!-- 统计项 3 -->
                <td class="stats-col" width="33%" style="padding: 12px 0; text-align: center;">
                  <div style="font-size: 20px; font-weight: 600; color: #d73a49; line-height: 1.2;">{{STAT_TOTAL_REACTIONS}}</div>
                  <div style="font-size: 11px; color: #586069; margin-top: 4px;">新回应</div>
                </td>
              </tr>
            </table>
          </td>
        </tr>

        <!-- ================= 区域 1: 新评论 ================= -->
        <tr>
          <td class="content-padding" style="padding: 10px 32px 0 32px;">
            <h2 style="margin: 20px 0 15px 0; font-size: 15px; font-weight: 600; color: #24292e; border-left: 3px solid #0366d6; padding-left: 10px; line-height: 1.2;">
              新评论 <span style="color: #586069; font-weight: 400; font-size: 13px; margin-left: 4px;">({{NEW_COMMENT_COUNT}})</span>
            </h2>
          </td>
        </tr>

        <!-- {{COMMENT_LOOP_START}} -->
        <tr>
          <td class="content-padding" style="padding: 0 32px 16px 32px;">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td valign="top" width="44" class="avatar-col" style="width: 44px; padding-right: 12px;">
                  <img src="{{AUTHOR_AVATAR}}" alt="头像" class="avatar-img" width="32" height="32" style="border-radius: 50%; background-color: #e1e4e8; display: block;">
                </td>
                <td valign="top">
                  <div style="margin-bottom: 4px; line-height: 1.4;">
                    <strong style="font-size: 14px; color: #24292e;">{{AUTHOR_NAME}}</strong>
                    <span style="font-size: 12px; color: #6a737d; margin-left: 4px;">{{TIMESTAMP}}</span>
                  </div>
                  <div style="font-size: 14px; line-height: 1.6; color: #24292e; margin-bottom: 8px;">
                    {{COMMENT_BODY}}
                  </div>
                  <div style="font-size: 12px; color: #586069; background-color: #f1f8ff; padding: 4px 8px; border-radius: 4px; display: inline-block; max-width: 100%; box-sizing: border-box;">
                    评论于：<a href="{{DISCUSSION_LINK}}" style="color: #0366d6; text-decoration: none;">{{DISCUSSION_TITLE}}</a>
                  </div>
                </td>
              </tr>
            </table>
            <div style="height: 1px; background-color: #eaecef; margin-top: 16px;"></div>
          </td>
        </tr>
        <!-- {{COMMENT_LOOP_END}} -->


        <!-- ================= 区域 2: 新回复 ================= -->
        <tr>
          <td class="content-padding" style="padding: 10px 32px 0 32px;">
             <h2 style="margin: 20px 0 15px 0; font-size: 15px; font-weight: 600; color: #24292e; border-left: 3px solid #6f42c1; padding-left: 10px; line-height: 1.2;">
              新回复 <span style="color: #586069; font-weight: 400; font-size: 13px; margin-left: 4px;">({{NEW_REPLY_COUNT}})</span>
            </h2>
          </td>
        </tr>

        <!-- {{REPLY_LOOP_START}} -->
        <tr>
          <td class="content-padding" style="padding: 0 32px 16px 32px;">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td valign="top" width="44" class="avatar-col" style="width: 44px; padding-right: 12px;">
                  <img src="{{REPLY_AUTHOR_AVATAR}}" alt="头像" class="avatar-img" width="32" height="32" style="border-radius: 50%; background-color: #e1e4e8; display: block;">
                </td>
                <td valign="top">
                  <div style="margin-bottom: 6px; line-height: 1.4;">
                    <strong style="font-size: 14px; color: #24292e;">{{REPLY_AUTHOR_NAME}}</strong>
                    <span style="font-size: 12px; color: #6a737d; margin-left: 4px;">{{REPLY_TIMESTAMP}}</span>
                  </div>
                  
                  <!-- 父评论引用 (样式优化) -->
                  <div style="margin-bottom: 8px; border-left: 3px solid #e1e4e8; padding: 4px 0 4px 8px; background-color: #fafbfc; color: #586069; font-size: 12px; border-radius: 0 4px 4px 0;">
                    回复 @{{PARENT_AUTHOR_NAME}}: {{PARENT_COMMENT_SNIPPET}}
                  </div>
                  
                  <div style="font-size: 14px; line-height: 1.6; color: #24292e; margin-bottom: 8px;">
                    {{REPLY_BODY}}
                  </div>
                  <div style="font-size: 12px; color: #586069; background-color: #f1f8ff; padding: 4px 8px; border-radius: 4px; display: inline-block; max-width: 100%; box-sizing: border-box;">
                    所在讨论：<a href="{{REPLY_LINK}}" style="color: #0366d6; text-decoration: none;">{{DISCUSSION_TITLE}}</a>
                  </div>
                </td>
              </tr>
            </table>
            <div style="height: 1px; background-color: #eaecef; margin-top: 16px;"></div>
          </td>
        </tr>
        <!-- {{REPLY_LOOP_END}} -->


        <!-- ================= 区域 3: 新回应 (Reactions) 手机端优化版 ================= -->
        <tr>
          <td class="content-padding" style="padding: 10px 32px 0 32px;">
             <h2 style="margin: 20px 0 15px 0; font-size: 15px; font-weight: 600; color: #24292e; border-left: 3px solid #d73a49; padding-left: 10px; line-height: 1.2;">
              新回应 <span style="color: #586069; font-weight: 400; font-size: 13px; margin-left: 4px;">({{NEW_REACTION_COUNT}})</span>
            </h2>
          </td>
        </tr>

        <!-- {{REACTION_LOOP_START}} -->
        <tr>
          <td class="content-padding" style="padding: 0 32px 16px 32px;">
            <table width="100%" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td valign="top" width="40" class="avatar-col" style="width: 40px; padding-right: 10px;">
                  <img src="{{REACTOR_AVATAR}}" alt="头像" class="avatar-img" width="32" height="32" style="border-radius: 50%; background-color: #e1e4e8; display: block;">
                </td>
                <td valign="top"> <!-- 修改为 top 对齐，防止文字多时头像跑偏 -->
                  <!-- 第一行：人名 + 时间 -->
                  <div style="font-size: 13px; line-height: 1.4; color: #586069; margin-bottom: 4px;">
                    <strong style="color: #24292e; font-weight: 600;">{{REACTOR_NAME}}</strong>
                    <span style="font-size: 12px; color: #959da5; float: right;">{{REACTION_TIMESTAMP}}</span>
                  </div>
                  
                  <!-- 第二行：动作 + 对象 -->
                  <div style="font-size: 13px; line-height: 1.5; color: #24292e; background-color: #fafbfc; border: 1px solid #f0f3f6; border-radius: 6px; padding: 8px;">
                    <div style="display: flex; align-items: center;">
                       <!-- 表情 -->
                       <span style="font-size: 16px; margin-right: 6px;">{{REACTION_EMOJI}}</span>
                       <!-- 标签：文章/评论 -->
                       <span style="font-size: 10px; color: #586069; border: 1px solid #e1e4e8; border-radius: 3px; padding: 1px 4px; margin-right: 6px; white-space: nowrap; background-color: #fff;">
                         {{TARGET_TYPE_LABEL}}
                       </span>
                    </div>
                    <!-- 标题/内容摘要 -->
                    <div style="margin-top: 4px;">
                       <a href="{{TARGET_LINK}}" style="color: #0366d6; text-decoration: none; font-weight: 500; display: block;">
                         {{TARGET_TITLE}}
                       </a>
                    </div>
                  </div>
                </td>
              </tr>
            </table>
            <!-- 隐形分隔，不使用横线减少视觉杂乱 -->
            <div style="height: 12px;"></div>
          </td>
        </tr>
        <!-- {{REACTION_LOOP_END}} -->


        <!-- 底部 Footer -->
        <tr>
          <td style="background-color: #f6f8fa; padding: 32px 24px; text-align: center; border-top: 1px solid #e1e4e8;">
            <p style="margin: 0 0 8px 0; font-size: 12px; color: #586069;">
              本邮件由 GitHub Actions 自动生成
            </p>
            <p style="margin: 0; font-size: 12px; color: #adb5bd;">
              &copy; {{YEAR}} xbzhong.cn
            </p>
          </td>
        </tr>

      </table>
    </center>
  </div>
</body>
</html>
